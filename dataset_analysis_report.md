# Segmented Dataset 数据集属性分析报告

## 一、数据集概览

- **数据集路径**: `/data/tangqiansong/rgb2voxel/data/segmented_dataset`
- **样本总数**: 2322 个
- **数据一致性**: ✓ 所有数据类型数量一致

## 二、RGB图像属性

### 基本属性
- **文件格式**: PNG
- **图像模式**: RGB (3通道彩色图像)
- **图像尺寸**: 640 × 360 像素 (宽 × 高)
- **数组形状**: (360, 640, 3) - (高度, 宽度, 通道数)
- **数据类型**: uint8 (8位无符号整数)
- **像素值范围**: [0, 255]
- **平均文件大小**: ~336 KB

### 统计信息 (示例样本)
- **平均像素值**: 91.38
- **标准差**: 77.36
- **通道数**: 3 (R, G, B)

### 特点
- 标准RGB彩色图像
- 分辨率: 640×360 (16:9宽高比)
- 8位深度，每个通道256级灰度

## 三、Depth图像属性

### 基本属性
- **文件格式**: PNG
- **图像模式**: RGB (虽然存储为RGB格式，但实际是深度信息)
- **图像尺寸**: 640 × 360 像素 (与RGB图像一致)
- **数组形状**: (360, 640, 3)
- **数据类型**: uint8
- **深度值范围**: [0, 255]
- **平均文件大小**: ~190 KB

### 统计信息 (示例样本)
- **平均深度值**: 104.87
- **标准差**: 86.61
- **有效深度像素比例**: 90.23% (非零像素)

### 特点
- **深度信息以RGB格式存储**: 三个通道（R、G、B）完全相同，实际是单通道灰度深度图
- **分辨率与RGB图像完全一致**: 640×360
- **有效深度像素比例**: 约90%的像素包含有效深度信息
- **编码方式**: 深度值直接映射到 [0, 255] 范围，可以使用任意一个通道读取深度信息

## 四、语义分割图(SEG)属性

### 基本属性
- **文件格式**: PNG
- **图像模式**: L (灰度图，单通道)
- **图像尺寸**: 640 × 360 像素 (与RGB/Depth一致)
- **数组形状**: (360, 640) - 单通道
- **数据类型**: uint8
- **标签值范围**: [0, 255]
- **平均文件大小**: ~0.81 KB (非常小，因为是二值化图像)

### 统计信息 (示例样本)
- **唯一标签值数量**: 2
- **标签值**: [0, 255]
  - **标签 0** (背景/others): 223,702 像素 (97.09%)
  - **标签 255** (robot_arm): 6,698 像素 (2.91%)

### 分割类别
根据相机参数文件，分割类别包括:
- `others`: 其他物体/背景
- `robot_arm`: 机器人手臂

### 特点
- 二值化分割图（只有两个类别）
- 单通道灰度图，文件很小
- 机器人手臂区域占比较小（约3%）

## 五、相机参数属性

### 文件格式
- **文件格式**: JSON
- **平均文件大小**: ~0.97 KB

### 参数结构

#### 1. 内参矩阵 (Intrinsic Matrix)
```
K = [
  [919.83,   0.0,   631.12,  0.0],
  [  0.0,  919.61,  363.88,  0.0],
  [  0.0,    0.0,     1.0,   0.0]
]
```

**参数解析**:
- **fx** = 919.83: X方向焦距（像素单位）
- **fy** = 919.61: Y方向焦距（像素单位）
- **cx** = 631.12: 主点X坐标（图像中心X，像素单位）
- **cy** = 363.88: 主点Y坐标（图像中心Y，像素单位）

**注意**: 
- 图像尺寸为 640×360，主点坐标 (631.12, 363.88) 接近图像中心 (320, 180)
- 焦距 fx 和 fy 接近，说明相机像素近似为正方形

#### 2. 外参矩阵 (Extrinsic Matrix)
```
[R | t] = [
  [ 0.621,  0.783,  0.018, -0.049],
  [ 0.634, -0.488, -0.600, -0.136],
  [-0.461,  0.384, -0.800,  0.991],
  [ 0.000,  0.000,  0.000,  1.000]
]
```

**参数解析**:
- **旋转矩阵 R** (3×3): 描述相机坐标系相对于世界坐标系的旋转
- **平移向量 t** (3×1): 描述相机坐标系相对于世界坐标系的位置
- **齐次变换矩阵**: 4×4矩阵，包含旋转和平移信息

#### 3. 元数据信息
- **cam_id**: "036422060909" - 相机ID
- **task_name**: "task_0001_user_0016_scene_0001_cfg_0003" - 任务名称
- **frame_idx**: 0 - 帧索引
- **extracted_idx**: 0 - 提取索引
- **has_segmentation**: true - 是否包含分割信息
- **segmentation_classes**: ["others", "robot_arm"] - 分割类别列表
- **segmentation_file**: 对应的分割图像文件名

### 相机参数特点
1. **内参**: 标准针孔相机模型，焦距约920像素
2. **外参**: 包含完整的6自由度位姿信息（3个旋转 + 3个平移）
3. **元数据**: 包含丰富的场景和任务信息

## 六、数据一致性分析

### 文件命名规则
所有文件遵循统一的命名格式:
```
task_{task_id}_user_{user_id}_scene_{scene_id}_cfg_{cfg_id}_{cam_id}_frame_{frame_idx}.{ext}
```

示例:
- `task_0001_user_0016_scene_0001_cfg_0003_036422060909_frame_000000.png`

### 数据对齐
- ✓ RGB、Depth、SEG图像尺寸完全一致 (640×360)
- ✓ 所有数据类型文件数量一致 (2322个)
- ✓ 文件命名规则统一，便于配对

## 七、数据用途分析

该数据集适用于:
1. **3D重建**: RGB + Depth + 相机参数可用于点云生成和3D重建
2. **语义分割**: SEG图像提供像素级语义标签
3. **机器人视觉**: 包含机器人手臂的分割标注
4. **相机标定**: 内参和外参可用于相机标定和位姿估计
5. **多视角融合**: 多个相机ID和场景可用于多视角重建

## 八、注意事项

1. **Depth图像格式**: 虽然存储为RGB格式，但实际是深度信息，使用时需要正确解析
2. **分割类别**: 当前只有2个类别（背景和机器人手臂），类别较少
3. **主点位置**: 内参中的主点坐标 (631, 364) 与图像中心 (320, 180) 差异较大，可能需要验证
4. **分辨率**: 640×360 是相对较低的分辨率，适合实时处理

## 九、建议

1. 验证Depth图像的编码方式（RGB格式可能只是存储方式）
2. 检查主点坐标是否与图像中心一致
3. 考虑扩展分割类别以提高数据集价值
4. 可以生成点云数据用于3D可视化

