# RGB2Voxel 完整流程配置文件
# 该配置文件用于控制从语义分割到点云生成再到体素化的完整流程

# ==============================================================================
# 数据集配置
# ==============================================================================
dataset:
  # 数据集根目录
  base_dir: "/home/qiansongtang/Documents/program/rgb2voxel/data"
  # 数据集名称（例如：6cam_dataset）
  dataset_name: "dataset2"
  # 要处理的任务列表，为空则处理所有任务
  # 例如：["task_0001_user_0016_scene_0001_cfg_0003"]
  tasks: []
  
# ==============================================================================
# SAM3 语义分割配置
# ==============================================================================
segmentation:
  # SAM3模型路径（相对于项目根目录或绝对路径）
  model_path: "Sam3/model"
  # 设备配置：cuda 或 cpu
  device: "cuda"
  # 分割的目标对象列表（使用文本提示）
  # 格式：{label: "文本提示", id: 类别ID}
  # 注意：背景类别会自动添加，ID为最后一个ID+1
  targets:
    - label: "clothe"
      prompt: "clothe"
      id: 1
  # 背景类别配置
  background:
    label: "background"
    id: 2
  # 分割阈值
  threshold: 0.3
  # mask阈值
  mask_threshold: 0.3
  # 是否覆盖已有的分割结果
  overwrite: true
  
# ==============================================================================
# 调色板配置
# 用于语义分割mask的可视化颜色
# ==============================================================================
color_palette:
  # 颜色格式：RGB (0-255)
  # 可以使用预定义的颜色名称或自定义RGB值
  colors:
    1:  # clothe
      name: "clothe"
      color: [255, 0, 0]  # 红色
    2:  # background  
      name: "background"
      color: [128, 128, 128]  # 灰色
  # 自动扩展：当有新类别时，使用以下颜色循环
  auto_extend_colors:
    - [0, 255, 0]      # 绿色
    - [0, 0, 255]      # 蓝色
    - [255, 255, 0]    # 黄色
    - [255, 0, 255]    # 品红
    - [0, 255, 255]    # 青色
    - [255, 128, 0]    # 橙色
    - [128, 0, 255]    # 紫色
    - [255, 192, 203]  # 粉色
    - [0, 128, 0]      # 深绿
    - [128, 0, 0]      # 深红

# ==============================================================================
# 点云生成配置
# ==============================================================================
pointcloud:
  # 图像下采样因子（1.0表示不下采样）
  downsample_factor: 1.0
  # 深度范围过滤（米）
  # 注意：不同数据集的深度范围可能不同
  # dataset: 0-1米, dataset2: 3-7米
  min_depth: 0.0
  max_depth: 10.0
  # 深度缩放因子（深度图存储单位转换为米）
  depth_scale: 1000.0
  # 最大时间差（毫秒），用于多视角图像匹配
  max_time_diff_ms: 50
  # 处理的帧数（null表示全部）
  num_frames: null
  # 点云过滤参数
  filter:
    # 体素下采样大小（米），0表示不下采样
    voxel_size: 0.0001
    # 统计离群点过滤的邻居数
    num_neighbors: 10
    # 统计离群点过滤的标准差比例
    std_ratio: 2.0
    # 半径离群点过滤的半径（米）
    radius: 0.01
  # 输出文件夹名称（在任务文件夹下）
  output_folder: "POINTCLOUDS"
  # 是否覆盖已有的点云数据
  overwrite: true

# ==============================================================================
# 体素化配置
# ==============================================================================
voxelization:
  # 体素网格大小
  voxel_size: 64
  # 物理空间大小（米）
  physical_size: 1.26
  # 输出文件夹名称（在任务文件夹下）
  output_folder: "VOXELS"
  # 是否覆盖已有的体素数据
  overwrite: true

# ==============================================================================
# 流程控制
# ==============================================================================
pipeline:
  # 要执行的步骤，可选：segmentation, pointcloud, voxelization
  # 设置为空列表 [] 则执行所有步骤
  steps: []
  # 是否保存颜色映射文件到数据集根目录
  save_color_map: true
  # 是否显示进度条
  show_progress: true
  # 日志级别：DEBUG, INFO, WARNING, ERROR
  log_level: "INFO"

